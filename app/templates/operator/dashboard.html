{# หน้า Dashboard ของพนักงาน (Operator) ทำไมถึงมีหน้านี้? ->
ให้พนักงานเห็นสถานะการทำงานของตัวเองวันนี้ ว่าทำยอดผลิตได้ถึงเป้าหรือยัง
ออกแบบมาให้แสดงผลเฉพาะสิ่งที่พนักงานต้องรู้เท่านั้น
เพื่อความรวดเร็วในการทำงานครับ #} {% extends "base_operator.html" %} {% block
title %}Dashboard{% endblock %} {% block content %}
<div class="mb-4">
  <h1 class="text-dark mb-1" style="font-size: 24px">Dashboard Overview</h1>
  <p class="text-muted" style="font-size: 14px">
    Real-time production monitoring and key metrics
  </p>
</div>

<!-- Summary Cards -->
<div class="row g-4 mb-4">
  <!-- Card 1: Today's Production -->
  <div class="col-md-3">
    <div class="card border-0 shadow-sm p-4 h-100">
      <div class="d-flex justify-content-between align-items-start mb-3">
        <div
          class="d-flex align-items-center justify-content-center bg-primary bg-opacity-10 text-primary rounded-3"
          style="width: 48px; height: 48px"
        >
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path
              d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"
            ></path>
            <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
            <line x1="12" y1="22.08" x2="12" y2="12"></line>
          </svg>
        </div>
        <span
          class="badge bg-success bg-opacity-10 text-success rounded-pill fw-normal px-2 py-1"
          style="font-size: 11px"
          >+5.2%</span
        >
      </div>
      <div class="text-muted mb-1" style="font-size: 13px; font-weight: 500">
        Today's Production
      </div>
      <div class="text-dark" style="font-size: 28px">342 Units</div>
    </div>
  </div>

  <!-- Card 2: Efficiency Rate -->
  <div class="col-md-3">
    <div class="card border-0 shadow-sm p-4 h-100">
      <div class="d-flex justify-content-between align-items-start mb-3">
        <div
          class="d-flex align-items-center justify-content-center bg-success bg-opacity-10 text-success rounded-3"
          style="width: 48px; height: 48px"
        >
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
          </svg>
        </div>
        <span
          class="badge bg-success bg-opacity-10 text-success rounded-pill fw-normal px-2 py-1"
          style="font-size: 11px"
          >98.5%</span
        >
      </div>
      <div class="text-muted mb-1" style="font-size: 13px; font-weight: 500">
        Efficiency Rate
      </div>
      <div class="text-dark" style="font-size: 28px">98.5%</div>
    </div>
  </div>

  <!-- Card 3: Low Stock Alerts -->
  <div class="col-md-3">
    <div class="card border-0 shadow-sm p-4 h-100">
      <div class="d-flex justify-content-between align-items-start mb-3">
        <div
          class="d-flex align-items-center justify-content-center bg-warning bg-opacity-10 text-warning rounded-3"
          style="width: 48px; height: 48px"
        >
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path
              d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"
            ></path>
            <line x1="12" y1="9" x2="12" y2="13"></line>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
          </svg>
        </div>
        <span
          class="badge bg-warning bg-opacity-10 text-warning rounded-pill fw-normal px-2 py-1"
          style="font-size: 11px"
          >3 Items</span
        >
      </div>
      <div class="text-muted mb-1" style="font-size: 13px; font-weight: 500">
        Low Stock Alerts
      </div>
      <div class="text-dark" style="font-size: 28px">3</div>
    </div>
  </div>

  <!-- Card 4: Active Orders -->
  <div class="col-md-3">
    <div class="card border-0 shadow-sm p-4 h-100">
      <div class="d-flex justify-content-between align-items-start mb-3">
        <div
          class="d-flex align-items-center justify-content-center bg-purple bg-opacity-10 text-purple rounded-3"
          style="width: 48px; height: 48px; color: #8b5cf6"
        >
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
            <polyline points="22 4 12 14.01 9 11.01"></polyline>
          </svg>
        </div>
        <span
          class="badge bg-success bg-opacity-10 text-success rounded-pill fw-normal px-2 py-1"
          style="font-size: 11px"
          >On Track</span
        >
      </div>
      <div class="text-muted mb-1" style="font-size: 13px; font-weight: 500">
        Active Orders
      </div>
      <div class="text-dark" style="font-size: 28px">12</div>
    </div>
  </div>
</div>

<div class="row g-4 mb-4">
  <!-- Weekly Production Bar Chart -->
  <div class="col-md-6">
    <div class="card border-0 shadow-sm p-4 h-100 d-flex flex-column">
      <h5 class="card-title fw-normal text-muted mb-4" style="font-size: 15px">
        Weekly Production
      </h5>
      <div class="flex-grow-1" style="min-height: 250px">
        <canvas id="productionChart"></canvas>
      </div>
    </div>
  </div>
  <!-- Parts Consumption Rate Line Chart -->
  <div class="col-md-6">
    <div class="card border-0 shadow-sm p-4 h-100 d-flex flex-column">
      <h5 class="card-title fw-normal text-muted mb-4" style="font-size: 15px">
        Parts Consumption Rate
      </h5>
      <div class="flex-grow-1" style="min-height: 250px">
        <canvas id="consumptionChart"></canvas>
      </div>
    </div>
  </div>
</div>

<!-- Recent Activity -->
<div class="card border-0 shadow-sm overflow-hidden mb-4">
  <div class="p-4 border-bottom bg-white">
    <h5 class="card-title mb-0 fw-normal text-muted" style="font-size: 18px">
      Recent Activity
    </h5>
  </div>
  <div class="list-group list-group-flush">
    <div class="list-group-item p-3 border-0 border-bottom activity-item">
      <div class="d-flex gap-3">
        <div
          class="mt-2"
          style="
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #10b981;
            flex-shrink: 0;
          "
        ></div>
        <div>
          <div class="fw-medium mb-1 text-dark" style="font-size: 14px">
            Production order #PO-2024-001 started
          </div>
          <div class="text-muted" style="font-size: 12px">10:30 AM</div>
        </div>
      </div>
    </div>
    <div class="list-group-item p-3 border-0 border-bottom activity-item">
      <div class="d-flex gap-3">
        <div
          class="mt-2"
          style="
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #f59e0b;
            flex-shrink: 0;
          "
        ></div>
        <div>
          <div class="fw-medium mb-1 text-dark" style="font-size: 14px">
            Low stock alert for Part #A-3421
          </div>
          <div class="text-muted" style="font-size: 12px">09:45 AM</div>
        </div>
      </div>
    </div>
    <div class="list-group-item p-3 border-0 border-bottom activity-item">
      <div class="d-flex gap-3">
        <div
          class="mt-2"
          style="
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #3b82f6;
            flex-shrink: 0;
          "
        ></div>
        <div>
          <div class="fw-medium mb-1 text-dark" style="font-size: 14px">
            Scrap reported: 2 units of Part #B-1234
          </div>
          <div class="text-muted" style="font-size: 12px">09:15 AM</div>
        </div>
      </div>
    </div>
    <div class="list-group-item p-3 border-0 activity-item">
      <div class="d-flex gap-3">
        <div
          class="mt-2"
          style="
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #10b981;
            flex-shrink: 0;
          "
        ></div>
        <div>
          <div class="fw-medium mb-1 text-dark" style="font-size: 14px">
            Shift started - Morning shift
          </div>
          <div class="text-muted" style="font-size: 12px">08:00 AM</div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .activity-item {
    transition: background-color 0.2s ease;
    cursor: default;
  }
  .activity-item:hover {
    background-color: #f8fafc;
  }
</style>

<script>
  // Production Chart
  const prodCtx = document.getElementById("productionChart").getContext("2d");
  new Chart(prodCtx, {
    type: "bar",
    data: {
      labels: ["Mon", "Tue", "Wed", "Thu", "Fri"],
      datasets: [
        {
          label: "Planned",
          data: [120, 140, 130, 155, 145],
          backgroundColor: "#3b82f6",
          borderRadius: 2,
          barPercentage: 0.6,
          categoryPercentage: 0.8,
        },
        {
          label: "Actual",
          data: [115, 142, 128, 152, 148],
          backgroundColor: "#10b981",
          borderRadius: 2,
          barPercentage: 0.6,
          categoryPercentage: 0.8,
        },
      ],
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: {
          position: "bottom",
          labels: { usePointStyle: true, boxWidth: 8 },
        },
      },
      scales: {
        y: {
          beginAtZero: true,
          border: { display: false },
          grid: { borderDash: [5, 5], drawBorder: false },
          ticks: { font: { size: 11 } },
        },
        x: {
          border: { display: false },
          grid: { display: false },
          ticks: { font: { size: 11 } },
        },
      },
    },
  });

  // Consumption Chart
  const consCtx = document.getElementById("consumptionChart").getContext("2d");
  new Chart(consCtx, {
    type: "line",
    data: {
      labels: ["Part A", "Part B", "Part C", "Part D", "Part E"],
      datasets: [
        {
          label: "Consumption",
          data: [82, 88, 75, 92, 85],
          borderColor: "#3b82f6",
          backgroundColor: "rgba(59, 130, 246, 0.05)",
          tension: 0.4,
          fill: true,
          pointBackgroundColor: "#fff",
          pointBorderColor: "#3b82f6",
          pointBorderWidth: 2,
          pointRadius: 4,
          pointHoverRadius: 6,
        },
      ],
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: { legend: { display: false } },
      scales: {
        y: {
          min: 0,
          max: 100,
          border: { display: false },
          grid: { borderDash: [5, 5], drawBorder: false },
          ticks: { font: { size: 11 } },
        },
        x: {
          border: { display: false },
          grid: { display: false },
          ticks: { font: { size: 11 } },
        },
      },
    },
  });
</script>
{% endblock %}
